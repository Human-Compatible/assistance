import{componentQrl as g,inlinedQrl as a,useClientEffectQrl as j,_noopQrl as m,Slot as M,createContext as y,useContext as h,useStore as u,useTaskQrl as P,useLexicalScope as I,_IMMUTABLE as x,_wrapSignal as _,useContextProvider as f}from"@builder.io/qwik";import{jsx as e,Fragment as v,jsxs as i}from"@builder.io/qwik/jsx-runtime";const R=g(a(()=>(j(m("s_gmDvbzRbWZU")),e(v,{children:e("main",{children:e(M,{},"cL_0")})},"cL_1")),"s_Gd6c6uAzGKo")),F=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"})),S=y("form-record-id-state"),$=y("form-prompt-id-state"),T=y("form-update-counter"),w=y("gpt-state"),Q=g(a(t=>{const o=h(S),b=h(T),r=h(w),c=u({disabled:!1});return P(a(()=>{const[n,s]=I();for(let d=0;d<s.items.length;d++){const p=s.items[d],l="";n[p.recordId]=l}},"s_QDLKCZfvX0E",[o,t])),e("div",{class:"container mx-auto items-center",children:e("div",{class:"px-5 py-5 flex justify-between bg-white border-b-2 shadow-lg rounded-lg",children:i("form",{class:"w-full",children:[t.items.map(({recordId:n,formText:s})=>e("div",{class:"flex flex-wrap -mx-3 mb-6",children:i("div",{class:"w-full px-3",children:[e("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",for:"grid-password",children:s}),e("input",{id:n,value:o[n],onChange$:m("s_iB8yPItuxhs",[r,n]),onInput$:m("s_NvkEIcJn2e4",[o,b,n]),type:"text",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"})]})})),e("button",{class:"block btn btn-primary sm:mb-0",type:"button",get disabled(){return c.disabled},onClick$:m("s_DdCXc0ubBQg",[c,o,r]),children:"Begin Chat",[x]:{disabled:_(c,"disabled")}})]})})})},"s_HMzlRiS7WiE")),W=g(a(t=>{const o=h(S),b=h(w),r=u({content:""});if(t.conversation==null||t.conversation.length==0)return e(v,{},"gP_0");if(t.fieldsToWaitFor!=null)for(let n=0;n<t.fieldsToWaitFor.length;n++){const s=o[t.fieldsToWaitFor[n].recordId];if(s==null||s=="")return e(v,{},"gP_1")}const c=a(async()=>{const[n,s,d,p]=I();let l=p.content.trim();if(l=="")return;p.content="";const C=JSON.stringify({client_name:n.name,client_text:l});console.log(C),d.conversation.push({message:l}),l=(await(await fetch("https://api.assistance.chat/chat/student/continue",{method:"POST",body:C,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:`Bearer ${s.accessToken}`}})).json()).response,d.conversation.push({message:l})},"s_f0d0R630zfs",[o,b,t,r]);return e("div",{class:"items-center",children:e("div",{class:"px-5 py-5 flex justify-between bg-white border-b-2 shadow-lg rounded-lg",children:i("div",{class:"w-full px-5 flex flex-col justify-between",children:[e("div",{class:"mt-5",children:t.conversation.map(({message:n},s)=>e("div",{class:`flex ${s%2==0?"justify-start":"justify-end"} mb-4`,children:e("div",{class:`ml-2 py-3 px-4 text-white ${s%2==0?"bg-gray-400 ml-2 rounded-br-3xl rounded-tr-3xl rounded-tl-xl":"bg-blue-400 mr-2 rounded-bl-3xl rounded-tl-3xl rounded-tr-xl"}`,style:{order:"2","overflow-wrap":"anywhere"},children:n})}))}),i("div",{class:"py-5",style:{display:`${t.disabled?"none":"block"}`},children:[e("textarea",{rows:2,class:"block w-full h-32 bg-gray-200 text-gray-700 border border-gray-200 py-5 pl-5 pr-14 rounded-xl mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",disabled:t.conversation.length%2==0,placeholder:"Type your message here...",get value(){return r.content},onChange$:m("s_4vUZ8HIkxmQ",[r]),onKeyDown$:m("s_0ifYVhMU4Gc",[c]),[x]:{value:_(r,"content")}}),e("button",{class:"absolute px-4 py-4 my-12 rounded-xl text-gray-500 bottom-1.5 right-10 hover:text-gray-400 disabled:hover:bg-transparent dark:disabled:hover:bg-transparent",disabled:t.conversation.length%2==0,onClick$:c,children:e("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 20 20",class:"h-8 w-8 rotate-90",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})})})},"s_Ii9WvOMtHrw")),z=g(a(()=>{const t=h(w);return i("div",{children:[e(W,{disabled:!1,get conversation(){return t.conversation},fieldsToWaitFor:[{recordId:"name"}],[x]:{disabled:x,conversation:_(t,"conversation")}},"nR_0"),e("div",{id:"gpt-assistance-chat"})]})},"s_FW9SvIgWFkg")),A=g(a(()=>e("section",{class:"bg-gradient-to-b md:bg-gradient-to-r from-white via-purple-50 to-sky-100 dark:bg-none mt-[-100px]",children:e("div",{class:"max-w-6xl mx-auto px-4 sm:px-6 md:flex h-screen pt-[100px]",children:i("div",{class:"py-12 md:py-12 lg:py-16 block md:flex text-center md:text-left w-full",children:[e("div",{class:"pb-12 md:pb-0 md:py-0 max-w-5xl mx-auto md:pr-16 flex items-center basis-[30%]",children:e("div",{children:e("h1",{class:"text-5xl md:text-[3rem] font-bold leading-tighter tracking-tighter mb-4 font-heading px-4 md:px-0",children:"Streamlit Assistance Chat"})})}),e("div",{class:"block md:flex items-center flex-1",children:i("div",{class:"relative m-auto w-full max-w-lg",children:[e("div",{class:"pb-5",children:e(Q,{items:[{recordId:"name",formText:"Name"}]},"Z1_0")}),e(z,{},"Z1_1")]})})]})})}),"s_tGVyH2aBobQ")),k={name:"student.assistance.chat",title:"student.assistance.chat",description:"student.assistance.chat",origin:"https://student.assistance.chat",basePathname:"/",trailingSlash:!0},U=g(a(()=>{const t=u({}),o=u({}),b=u({counter:0}),r=u({accessToken:"",agentName:"",promptTemplate:"",initialPrompt:"",conversation:[]},{recursive:!0});return f(S,t),f($,o),f(T,b),f(w,r),e(v,{children:e(A,{},"hl_0")},"hl_1")},"s_PioeegRlDss")),B={title:k.title,meta:[{name:"description",content:k.description}]},D=Object.freeze(Object.defineProperty({__proto__:null,default:U,head:B},Symbol.toStringTag,{value:"Module"})),L=()=>F,O=[[/^\/$/,[L,()=>D],void 0,"/",["q-b56f3cc1.js","q-7a18d201.js"]]],E=[],G=!0,Z="/",H=!0,J={routes:O,menus:E,trailingSlash:G,basePathname:Z,cacheModules:H};export{Z as basePathname,H as cacheModules,J as default,E as menus,O as routes,G as trailingSlash};
